[gd_scene load_steps=49 format=3 uid="uid://bm255lj1dn77s"]

[ext_resource type="Script" path="res://battle.gd" id="1_7ml37"]
[ext_resource type="Texture2D" uid="uid://d11bggw3x1uyd" path="res://art/TextBox2.png" id="2_ijocl"]
[ext_resource type="Texture2D" uid="uid://vmjdkp5tvlmk" path="res://art/plasma_BG/plasma_1.png" id="2_ip06d"]
[ext_resource type="Texture2D" uid="uid://5ttqomb60a" path="res://art/plasma_BG/plasma_2.png" id="3_bltw0"]
[ext_resource type="Texture2D" uid="uid://cgaor1knktg5k" path="res://art/attack_button_2.png" id="3_dyu2n"]
[ext_resource type="Texture2D" uid="uid://0qc7jpiig6vj" path="res://art/New Piskel(60).png" id="3_gkdh7"]
[ext_resource type="Texture2D" uid="uid://cv7u5m2d0lcjt" path="res://art/health_bar.png" id="4_ebixj"]
[ext_resource type="Texture2D" uid="uid://bp6bqhb8alchg" path="res://art/skill_button_2.png" id="4_ev0yj"]
[ext_resource type="Texture2D" uid="uid://x8hk04uttokc" path="res://art/plasma_BG/plasma_3.png" id="4_uxq1v"]
[ext_resource type="Texture2D" uid="uid://caldaaxqv1clx" path="res://art/plasma_BG/plasma_4.png" id="5_767gt"]
[ext_resource type="Texture2D" uid="uid://bu335pj7asoik" path="res://art/item_button_2.png" id="5_lmwpe"]
[ext_resource type="Texture2D" uid="uid://bonqce3eas55d" path="res://art/guard_button_2.png" id="6_ijjlh"]
[ext_resource type="Texture2D" uid="uid://cpyborgrj064g" path="res://art/plasma_BG/plasma_5.png" id="6_vidpb"]
[ext_resource type="Texture2D" uid="uid://d0of76s1cx4u8" path="res://art/plasma_BG/plasma_6.png" id="7_2x3au"]
[ext_resource type="Texture2D" uid="uid://d13kmeuqjcx28" path="res://art/plasma_BG/plasma_7.png" id="8_74cct"]
[ext_resource type="Texture2D" uid="uid://dw4e6s13r8lrd" path="res://art/plasma_BG/plasma_8.png" id="9_ekwef"]
[ext_resource type="Texture2D" uid="uid://c5p0gcp4qo27n" path="res://art/plasma_BG/plasma_9.png" id="10_syqwr"]
[ext_resource type="Texture2D" uid="uid://brqjahq6p4irw" path="res://art/plasma_BG/plasma_10.png" id="11_l1u3g"]
[ext_resource type="Texture2D" uid="uid://l8borlq0of8r" path="res://art/plasma_BG/plasma_11.png" id="12_t1xuw"]
[ext_resource type="Texture2D" uid="uid://bcqfkr4beavp4" path="res://art/plasma_BG/plasma_12.png" id="13_55uh5"]
[ext_resource type="Texture2D" uid="uid://c3d0g0ehmd0y3" path="res://art/plasma_BG/plasma_13.png" id="14_5bj7h"]
[ext_resource type="Texture2D" uid="uid://pw0ix2f0bi5f" path="res://art/plasma_BG/plasma_14.png" id="15_n6jyy"]
[ext_resource type="Texture2D" uid="uid://cdbdomkui8r47" path="res://art/plasma_BG/plasma_15.png" id="16_t445w"]
[ext_resource type="Texture2D" uid="uid://cvj8rwu5ug8vr" path="res://art/plasma_BG/plasma_16.png" id="17_3ehyg"]
[ext_resource type="Texture2D" uid="uid://cbawcs4muwbsd" path="res://art/plasma_BG/plasma_17.png" id="18_5n1sf"]
[ext_resource type="Texture2D" uid="uid://dj0av2aq56pg3" path="res://art/plasma_BG/plasma_18.png" id="19_iwpgi"]
[ext_resource type="Texture2D" uid="uid://ymqquq0gqog0" path="res://art/plasma_BG/plasma_19.png" id="20_sulob"]
[ext_resource type="Texture2D" uid="uid://4bpchvapk2i0" path="res://art/plasma_BG/plasma_20.png" id="21_0bwdp"]
[ext_resource type="Texture2D" uid="uid://bkrc6ae5su885" path="res://art/plasma_BG/plasma_21.png" id="22_yl0u0"]
[ext_resource type="Texture2D" uid="uid://p8cbsgccp42u" path="res://art/plasma_BG/plasma_22.png" id="23_5eurb"]
[ext_resource type="Texture2D" uid="uid://belycbslf00yh" path="res://art/plasma_BG/plasma_23.png" id="24_e35ec"]
[ext_resource type="Texture2D" uid="uid://crbuyr34uw6lg" path="res://art/plasma_BG/plasma_24.png" id="25_5mtsh"]
[ext_resource type="Texture2D" uid="uid://d3qykxwqqt502" path="res://art/plasma_BG/plasma_25.png" id="26_6qqwg"]
[ext_resource type="Texture2D" uid="uid://cqq2cyydb6yly" path="res://art/plasma_BG/plasma_26.png" id="27_lk23v"]
[ext_resource type="Texture2D" uid="uid://yg3b05om4e47" path="res://art/plasma_BG/plasma_27.png" id="28_akhek"]
[ext_resource type="Texture2D" uid="uid://bttyyfj4ka2jc" path="res://art/plasma_BG/plasma_28.png" id="29_f07n1"]
[ext_resource type="Texture2D" uid="uid://dxcgfs4r1ij08" path="res://art/plasma_BG/plasma_29.png" id="30_s2nks"]
[ext_resource type="Texture2D" uid="uid://du0s88gn3r30g" path="res://art/plasma_BG/plasma_30.png" id="31_a2kch"]

[sub_resource type="SpriteFrames" id="SpriteFrames_cmsl8"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_ip06d")
}, {
"duration": 1.0,
"texture": ExtResource("3_bltw0")
}, {
"duration": 1.0,
"texture": ExtResource("4_uxq1v")
}, {
"duration": 1.0,
"texture": ExtResource("5_767gt")
}, {
"duration": 1.0,
"texture": ExtResource("6_vidpb")
}, {
"duration": 1.0,
"texture": ExtResource("7_2x3au")
}, {
"duration": 1.0,
"texture": ExtResource("8_74cct")
}, {
"duration": 1.0,
"texture": ExtResource("9_ekwef")
}, {
"duration": 1.0,
"texture": ExtResource("10_syqwr")
}, {
"duration": 1.0,
"texture": ExtResource("11_l1u3g")
}, {
"duration": 1.0,
"texture": ExtResource("12_t1xuw")
}, {
"duration": 1.0,
"texture": ExtResource("13_55uh5")
}, {
"duration": 1.0,
"texture": ExtResource("14_5bj7h")
}, {
"duration": 1.0,
"texture": ExtResource("15_n6jyy")
}, {
"duration": 1.0,
"texture": ExtResource("16_t445w")
}, {
"duration": 1.0,
"texture": ExtResource("17_3ehyg")
}, {
"duration": 1.0,
"texture": ExtResource("18_5n1sf")
}, {
"duration": 1.0,
"texture": ExtResource("19_iwpgi")
}, {
"duration": 1.0,
"texture": ExtResource("20_sulob")
}, {
"duration": 1.0,
"texture": ExtResource("21_0bwdp")
}, {
"duration": 1.0,
"texture": ExtResource("22_yl0u0")
}, {
"duration": 1.0,
"texture": ExtResource("23_5eurb")
}, {
"duration": 1.0,
"texture": ExtResource("24_e35ec")
}, {
"duration": 1.0,
"texture": ExtResource("25_5mtsh")
}, {
"duration": 1.0,
"texture": ExtResource("26_6qqwg")
}, {
"duration": 1.0,
"texture": ExtResource("27_lk23v")
}, {
"duration": 1.0,
"texture": ExtResource("28_akhek")
}, {
"duration": 1.0,
"texture": ExtResource("29_f07n1")
}, {
"duration": 1.0,
"texture": ExtResource("30_s2nks")
}, {
"duration": 1.0,
"texture": ExtResource("31_a2kch")
}],
"loop": true,
"name": &"plasma",
"speed": 15.0
}]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_muq6t"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_yocl6"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_50vmi"]
bg_color = Color(0.103744, 0.103744, 0.103743, 1)
corner_radius_top_left = 3
corner_radius_top_right = 3
corner_radius_bottom_right = 3
corner_radius_bottom_left = 3
anti_aliasing = false

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_0cp2p"]
bg_color = Color(0.862745, 0.0901961, 0.0588235, 0.737255)
corner_radius_top_left = 3
corner_radius_top_right = 3
corner_radius_bottom_right = 3
corner_radius_bottom_left = 3
anti_aliasing = false

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_gih1b"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_yseiw"]
bg_color = Color(0.862745, 0.0901961, 0.0588235, 1)
corner_radius_top_left = 2
corner_radius_top_right = 2
corner_radius_bottom_right = 2
corner_radius_bottom_left = 2
anti_aliasing = false
anti_aliasing_size = 1.481

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_mhnxb"]
bg_color = Color(0.103744, 0.103744, 0.103743, 1)
corner_radius_top_left = 3
corner_radius_top_right = 3
corner_radius_bottom_right = 3
corner_radius_bottom_left = 3
anti_aliasing = false

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_fus32"]
bg_color = Color(0.431373, 0.305882, 1, 0.737255)
corner_radius_top_left = 3
corner_radius_top_right = 3
corner_radius_bottom_right = 3
corner_radius_bottom_left = 3
anti_aliasing = false

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_yiuj2"]
bg_color = Color(0.430666, 0.307152, 1, 1)
corner_radius_top_left = 2
corner_radius_top_right = 2
corner_radius_bottom_right = 2
corner_radius_bottom_left = 2
anti_aliasing = false
anti_aliasing_size = 1.481

[node name="Battle" type="Node2D"]
process_priority = 1
position = Vector2(-1, 0)
script = ExtResource("1_7ml37")
skill_file = null
metadata/_edit_group_ = true

[node name="Camera" type="Camera2D" parent="."]
position = Vector2(240, 180)
enabled = false

[node name="Control" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 480.0
offset_bottom = 360.0
grow_horizontal = 2
grow_vertical = 2

[node name="BG" type="Control" parent="Control"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
grow_horizontal = 2
grow_vertical = 2

[node name="BG" type="AnimatedSprite2D" parent="Control/BG"]
sprite_frames = SubResource("SpriteFrames_cmsl8")
animation = &"plasma"

[node name="Enemies" type="Control" parent="Control"]
anchors_preset = 0
offset_right = 480.0
offset_bottom = 360.0

[node name="3d_scene" type="SubViewportContainer" parent="Control/Enemies"]
layout_mode = 0
offset_left = 1.0
offset_right = 481.0
offset_bottom = 360.0

[node name="SubViewport" type="SubViewport" parent="Control/Enemies/3d_scene"]
transparent_bg = true
handle_input_locally = false
size = Vector2i(480, 360)
render_target_update_mode = 4

[node name="Node3D" type="Node3D" parent="Control/Enemies/3d_scene/SubViewport"]

[node name="Camera3D" type="Camera3D" parent="Control/Enemies/3d_scene/SubViewport/Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 4)
projection = 1
size = 4.0

[node name="CSGBox3D" type="CSGBox3D" parent="Control/Enemies/3d_scene/SubViewport/Node3D"]

[node name="TopBox" type="PanelContainer" parent="Control"]
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -120.0
offset_top = 8.0
offset_right = 120.0
offset_bottom = 72.0
grow_horizontal = 2
theme_override_styles/panel = SubResource("StyleBoxEmpty_muq6t")

[node name="Theme" type="NinePatchRect" parent="Control/TopBox"]
layout_mode = 2
texture = ExtResource("2_ijocl")
region_rect = Rect2(0, 0, 96, 96)
patch_margin_left = 32
patch_margin_top = 32
patch_margin_right = 32
patch_margin_bottom = 32

[node name="Margin" type="MarginContainer" parent="Control/TopBox"]
layout_mode = 2
theme_override_constants/margin_left = 8
theme_override_constants/margin_top = 8
theme_override_constants/margin_right = 8
theme_override_constants/margin_bottom = 8

[node name="Text" type="RichTextLabel" parent="Control/TopBox/Margin"]
layout_mode = 2
theme_override_colors/default_color = Color(1, 1, 1, 1)
theme_override_font_sizes/normal_font_size = 12
scroll_active = false
scroll_following = true

[node name="Actions" type="Control" parent="Control"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -120.0
offset_top = -104.0
offset_right = 120.0
offset_bottom = -8.0
grow_horizontal = 2
grow_vertical = 0

[node name="Attack" type="TextureButton" parent="Control/Actions"]
layout_mode = 0
offset_left = 3.0
offset_top = 3.0
offset_right = 117.0
offset_bottom = 45.0
texture_normal = ExtResource("3_dyu2n")

[node name="Skill" type="TextureButton" parent="Control/Actions"]
layout_mode = 0
offset_left = 123.0
offset_top = 3.0
offset_right = 237.0
offset_bottom = 45.0
texture_normal = ExtResource("4_ev0yj")

[node name="Item" type="TextureButton" parent="Control/Actions"]
layout_mode = 0
offset_left = 3.0
offset_top = 51.0
offset_right = 117.0
offset_bottom = 93.0
texture_normal = ExtResource("5_lmwpe")

[node name="Guard" type="TextureButton" parent="Control/Actions"]
layout_mode = 0
offset_left = 123.0
offset_top = 51.0
offset_right = 237.0
offset_bottom = 93.0
texture_normal = ExtResource("6_ijjlh")

[node name="Fight" type="Button" parent="Control/Actions"]
visible = false
layout_mode = 2
offset_left = 3.0
offset_top = 3.0
offset_right = 243.0
offset_bottom = 45.0
text = "Fight"

[node name="Run" type="Button" parent="Control/Actions"]
visible = false
layout_mode = 2
offset_left = 3.0
offset_top = 51.0
offset_right = 243.0
offset_bottom = 93.0
text = "Run
"

[node name="Friend" type="PanelContainer" parent="Control"]
layout_mode = 2
offset_left = 24.0
offset_top = 8.0
offset_right = 88.0
offset_bottom = 96.0
theme_override_styles/panel = SubResource("StyleBoxEmpty_yocl6")

[node name="Theme" type="NinePatchRect" parent="Control/Friend"]
layout_mode = 2
texture = ExtResource("2_ijocl")
region_rect = Rect2(0, 0, 96, 96)
patch_margin_left = 32
patch_margin_top = 32
patch_margin_right = 32
patch_margin_bottom = 32

[node name="Margin" type="MarginContainer" parent="Control/Friend"]
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="Organization" type="VBoxContainer" parent="Control/Friend/Margin"]
layout_mode = 2
theme_override_constants/separation = 8

[node name="Portrait" type="TextureRect" parent="Control/Friend/Margin/Organization"]
layout_mode = 2
texture = ExtResource("3_gkdh7")
stretch_mode = 3

[node name="HealthMeter" type="Control" parent="Control/Friend/Margin/Organization"]
layout_mode = 2

[node name="Health" type="ProgressBar" parent="Control/Friend/Margin/Organization/HealthMeter"]
layout_mode = 2
offset_left = 4.0
offset_right = 44.0
offset_bottom = 4.0
theme_override_styles/background = SubResource("StyleBoxFlat_50vmi")
theme_override_styles/fill = SubResource("StyleBoxFlat_0cp2p")
value = 75.0
show_percentage = false

[node name="DestinationHealth" type="ProgressBar" parent="Control/Friend/Margin/Organization/HealthMeter"]
layout_mode = 2
offset_left = 4.0
offset_right = 44.0
offset_bottom = 4.0
theme_override_styles/background = SubResource("StyleBoxEmpty_gih1b")
theme_override_styles/fill = SubResource("StyleBoxFlat_yseiw")
value = 50.0
show_percentage = false

[node name="TextureRect" type="TextureRect" parent="Control/Friend/Margin/Organization/HealthMeter"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="PPMeter" type="Control" parent="Control/Friend/Margin/Organization"]
layout_mode = 2

[node name="Health" type="ProgressBar" parent="Control/Friend/Margin/Organization/PPMeter"]
layout_mode = 2
offset_left = 4.0
offset_right = 44.0
offset_bottom = 4.0
theme_override_styles/background = SubResource("StyleBoxFlat_mhnxb")
theme_override_styles/fill = SubResource("StyleBoxFlat_fus32")
value = 75.0
show_percentage = false

[node name="DestinationHealth" type="ProgressBar" parent="Control/Friend/Margin/Organization/PPMeter"]
layout_mode = 2
offset_left = 4.0
offset_right = 44.0
offset_bottom = 4.0
theme_override_styles/background = SubResource("StyleBoxEmpty_gih1b")
theme_override_styles/fill = SubResource("StyleBoxFlat_yiuj2")
value = 50.0
show_percentage = false

[node name="TextureProgressBar" type="TextureProgressBar" parent="Control/Friend/Margin/Organization"]
visible = false
layout_mode = 2
value = 50.0
texture_progress = ExtResource("4_ebixj")

[node name="TypeCharacterTimer" type="Timer" parent="."]
wait_time = 0.1

[connection signal="pressed" from="Control/Actions/Attack" to="." method="_on_attack_pressed"]
[connection signal="pressed" from="Control/Actions/Skill" to="." method="_on_skill_pressed"]
[connection signal="pressed" from="Control/Actions/Item" to="." method="_on_item_pressed"]
[connection signal="pressed" from="Control/Actions/Guard" to="." method="_on_guard_pressed"]
[connection signal="timeout" from="TypeCharacterTimer" to="." method="_on_type_character_timer_timeout"]
